<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genshin Shibari Roulette</title>
    <link rel="stylesheet" href="styles.css">
    <!-- script.jsはここには書かない！ -->
</head>
<body>
    <button id="homeButton" class="home-button">最初に戻る</button>

    <div class="container">
        <!-- スタート画面 -->
        <div id="startScreen">
            <h1>原神縛りルーレット</h1>
            <div class="input-group">
                <label for="playerCount">プレイヤー数：</label>
                <input type="number" id="playerCount" value="1" min="1" max="4">
            </div>
            <div class="input-group">
                <label for="bindCount">縛りの数：</label>
                <input type="number" id="bindCount" value="1" min="1" max="4">
            </div>
            <div class="button-group">
                <button id="startAllButton">ボス＋縛りルーレット</button>
                <button id="startBossButton">ボスルーレットのみ</button>
                <button id="startBindButton">縛りルーレットのみ</button>
                <button id="showBindSelectionButton">詳細縛り設定</button>
            </div>
        </div>

        <!-- 詳細縛り設定画面 -->
        <div id="bindSelection" class="hidden">
            <h2>詳細縛り設定</h2>
            <div class="selection-container">
                <div class="selection-box">
                    <h3>▼ 手動で縛りを決める</h3>
                    <div id="manualBindButtons" class="button-group"></div>
                </div>
                <div class="selection-box">
                    <h3>▼ ルーレットで縛りを決める</h3>
                    <div id="rouletteBindButtons" class="button-group-checkbox"></div>
                </div>
            </div>
            <button id="executeSelectionButton">設定完了</button>
        </div>

        <!-- ルーレット画面 -->
        <div id="rouletteScreen" class="hidden">
            <h2 id="rouletteTitle"></h2>
            <div class="roulette-container">
                <canvas id="rouletteCanvas" width="500" height="500"></canvas>
            </div>
            <div class="controls">
                <button id="spinButton">スピン</button>
                <button id="stopButton" disabled>ストップ</button>
                <button id="nextButton" class="hidden">次へ</button>
                <button id="notOwnedButton" class="hidden">持っていない（リロール）</button>
            </div>
            <div id="popup" class="popup"></div>
        </div>
        
        <!-- 手動選択用モーダル -->
        <div id="manualSelectModal" class="modal hidden">
            <div class="modal-content">
                <h3 id="modalTitle"></h3>
                <div id="modalChoices" class="button-group"></div>
                <button id="modalCloseButton">キャンセル</button>
            </div>
        </div>

        <!-- 結果画面 -->
        <div id="resultScreen" class="hidden">
            <h1>最終結果</h1>
            <div id="results"></div>
            <button id="backToStartButton">最初に戻る</button>
        </div>
    </div>

    <!-- ★★ 重要: script.jsは必ずbodyの一番最後に書く ★★ -->
    <script src="script.js"></script>
</body>
</html>
